!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom={})}(this,function(e){"use strict";var t="#".charCodeAt(0),i=".".charCodeAt(0),n=function(e,n){var r=function(e){for(var n=null,r=null,o=null,u=0,l="",s=0;s<=e.length;s++){var f=e.charCodeAt(s),a=f===t,d=f===i;a||d||!f?(0===u?n=0===s?"div":l:1===u?r=l:o?o+=" "+l:o=l,a?u=1:d&&(u=2),l=""):l+=e[s]}return{tag:n,id:r,className:o}}(e),o=r.tag,u=r.id,l=r.className,s=n?document.createElementNS(n,o):document.createElement(o);return u&&(s.id=u),l&&(n?s.setAttribute("class",l):s.className=l),s},r=function(e,t){var i=w(e),n=w(t);return t===n&&n.__redom_view&&(t=n.__redom_view),n.parentNode&&(o(t,n,i),i.removeChild(n)),t},o=function(e,t,i){var n=t.__redom_lifecycle;if(n){var r=i;for(t.__redom_mounted&&a(t,"onunmount");r;){var o=r.__redom_lifecycle||(r.__redom_lifecycle={}),u=!1;for(var l in n)o[l]&&(o[l]-=n[l]),o[l]&&(u=!0);u||(r.__redom_lifecycle=null),r=r.parentNode}}else t.__redom_mounted=!1},u=["onmount","onunmount"],l="ShadowRoot"in window,s=function(e,t,i){var n=w(e),r=w(t);t===r&&r.__redom_view&&(t=r.__redom_view),t!==r&&(r.__redom_view=t);var u=r.__redom_mounted,l=r.parentNode;return u&&l!==n&&o(t,r,l),null!=i?n.insertBefore(r,w(i)):n.appendChild(r),f(t,r,n,l),t},f=function(e,t,i,n){for(var r=t.__redom_lifecycle||(t.__redom_lifecycle={}),o=i===n,s=!1,f=0;f<u.length;f++){var d=u[f];!o&&e!==t&&d in e&&(r[d]=(r[d]||0)+1),r[d]&&(s=!0)}if(s){var h=i,_=!1;if((o||!_&&h&&h.__redom_mounted)&&(a(t,o?"onremount":"onmount"),_=!0),!o)for(;h;){var v=h.parentNode,c=h.__redom_lifecycle||(h.__redom_lifecycle={});for(var m in r)c[m]=(c[m]||0)+r[m];!_&&(h===document||l&&h instanceof window.ShadowRoot||v&&v.__redom_mounted)&&(a(h,o?"onremount":"onmount"),_=!0),h=v}}else t.__redom_mounted=!0},a=function(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var i=e.__redom_lifecycle;if(i){var n=e.__redom_view,r=0;n&&n[t]&&n[t]();for(var o in i)o&&r++;if(r)for(var u=e.firstChild;u;){var l=u.nextSibling;a(u,t),u=l}}},d=function(e,t,i){var n=w(e);if(void 0!==i)n.style[t]=i;else if(p(t))n.setAttribute("style",t);else for(var r in t)d(n,r,t[r])},h="http://www.w3.org/1999/xlink",_=function(e,t,i){var n=w(e),r=n instanceof SVGElement;if(void 0!==i)if("style"===t)d(n,i);else if(r&&g(i))n[t]=i;else if(!r&&(t in n||g(i)))n[t]=i;else{if(r&&"xlink"===t)return void function(e,t){for(var i in t)e.setAttributeNS(h,i,t[i])}(n,i);n.setAttribute(t,i)}else for(var o in t)_(n,o,t[o])},v=function(e){return document.createTextNode(e)},c=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];(0===n||n)&&("function"==typeof n?n(e):p(n)||y(n)?e.appendChild(v(n)):b(w(n))?s(e,n):n.length?c(e,n):"object"==typeof n&&_(e,n))}},m=function(e){return p(e)?A(e):w(e)},w=function(e){return e.nodeType&&e||!e.el&&e||w(e.el)},p=function(e){return"string"==typeof e},y=function(e){return"number"==typeof e},g=function(e){return"function"==typeof e},b=function(e){return e&&e.nodeType},N={},x=function(e){return N[e]||(N[e]=n(e))},A=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n;if(p(e))n=x(e).cloneNode(!1);else{if(!b(e))throw new Error("At least one argument required");n=e.cloneNode(!1)}return c(n,t),n};A.extend=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=x(e);return A.bind.apply(A,[this,n].concat(t))};var C=A,S=A,k=function(e,t){if(void 0===t.length)return k(e,[t]);for(var i=w(e).firstChild,n=0;n<t.length;n++){var o=t[n];if(o){w(o)!==i?s(e,o,i):i=i.nextSibling}}for(;i;){var u=i.nextSibling;r(e,i),i=u}},V=function(e,t,i,n){return new D(e,t,i,n)},D=function(e,t,i,n){this.__redom_list=!0,this.View=t,this.initData=n,this.views=[],this.el=m(e),null!=i&&(this.lookup={},this.key=g(i)?i:function(e){return function(t){return t[e]}}(i))};D.prototype.update=function(e,t){void 0===e&&(e=[]);for(var i=this.View,n=this.key,o=null!=n,u=this.initData,l=new Array(e.length),s=this.views,f=n&&{},a=n&&this.lookup,d=0;d<e.length;d++){var h=e[d],_=void 0;if(o){var v=n(h);_=a[v]||new i(u,h,d,e),f[v]=_,_.__redom_id=v}else _=s[d]||new i(u,h,d,e);l[d]=_;w(_.el).__redom_view=_,_.update&&_.update(h,d,e,t)}if(o)for(var c=0;c<s.length;c++){var m=s[c].__redom_id;m in f||r(this,a[m])}k(this,l),o&&(this.lookup=f),this.views=l},D.extend=function(e,t,i,n){return D.bind(D,e,t,i,n)},V.extend=D.extend;var E=function(e,t){this.el=v(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:this._View=e,this._initData=t};E.prototype.update=function(e,t){var i=this._placeholder,n=this.el.parentNode;if(e){if(!this.visible){if(this._el)return s(n,this._el,i),r(n,i),this.el=this._el,void(this.visible=e);var o=new(0,this._View)(this._initData);this.el=w(o),this.view=o,s(n,o,i),r(n,i)}this.view&&this.view.update&&this.view.update(t)}else if(this.visible){if(this._el)return s(n,i,this._el),r(n,this._el),this.el=i,void(this.visible=e);s(n,i,this.view),r(n,this.view),this.el=i,this.view=null}this.visible=e};var j=function(e,t,i){this.el=m(e),this.Views=t,this.initData=i};j.prototype.update=function(e,t){if(e!==this.route){var i=this.Views[e];this.view=i&&new i(this.initData,t),this.route=e,k(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var R="http://www.w3.org/2000/svg",T={},q=function(e){return T[e]||(T[e]=n(e,R))},P=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n;if(p(e))n=q(e).cloneNode(!1);else{if(!b(e))throw new Error("At least one argument required");n=e.cloneNode(!1)}return c(n,t),n};P.extend=function(e){var t=q(e);return P.bind(this,t)},P.ns=R;var B=P;e.el=C,e.h=S,e.html=A,e.list=V,e.List=D,e.mount=s,e.unmount=r,e.place=function(e,t){return new E(e,t)},e.Place=E,e.router=function(e,t,i){return new j(e,t,i)},e.Router=j,e.setAttr=_,e.setStyle=d,e.setChildren=k,e.s=B,e.svg=P,e.text=v,Object.defineProperty(e,"__esModule",{value:!0})});